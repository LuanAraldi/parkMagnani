<html>
<head>

  <!-- CSS -->
  <link type="text/css" rel="stylesheet" href="../public/materialize/css/materialize.min.css">

  <title>
    Magnani'Spark
  </title>

</head>

<body class="blue-grey darken-1 valign-wrapper">
  <div class="container valign">
    <div class="row">
      <div class="col s12 white-text center-align grey darken-4" style="margin-bottom:20px;">
        <h1>Magnani'Spark</h1>
      </div>
    </div>

    <div class="row">
      <div class="card col s12 grey white-text" style="padding-top:30px;">

        <div class="col s12">
          <h5 class="">Cadastrar Veículo</h5>
        </div>

        <div class="input-field col s12">
          <input placeholder="Entre com a placa do veículo, exemplo: ABC-1234" id="addcar" type="text" class="validate" style="border-bottom:grey;box-shadow:0 1px 0 0 grey;">
        </div>
      </div>
      <div class="row">
        <div class="col s6 center-align">
          <a class="btn waves-effect grey waves-light" href="main.html" style="width:200px;">Cancelar
          </a>
        </div>
        <div class="col s6 center-align">
          <a class="btn waves-effect grey darken-4 waves-light" id="salvar" type="submit" style="width:200px;">Salvar
          </a>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col s12 white-text center-align grey darken-4" style="height: 50px;">
        <p class="valign">Powered by Joshua Raiser & Luan Araldi - 2016</p>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script type="text/javascript" src="../public/jquery/jquery-3.1.1.min.js"></script>
  <script type="text/javascript" src="../public/materialize/js/materialize.min.js"></script>
  <script>
  $(function(){

      // faz submit se a placa for válida
      $('#salvar').on('click', function(evt){
        if(isValid($('#addcar')))
        {
          // placa aceita, continua para o webservice
          window.location = "main.html";
        }
        else {
          // placa rejeitada
          evt.preventDefault();
        }
      });

      // valida placar no formato "ABC-1234"
      function isValid(pl)
      {
        var value = pl.val();
        var placa = new RegExp(/[a-z]{3}-?[0-9]{4}/gi);

        console.log(value);
        if (value.match(placa)) {
            console.log("placa aceita");
            return true;
        }
        else
        {
            console.log("placa rejeitada");
            return false;
        }
      }

  });
  </script>
</body>


</html>
